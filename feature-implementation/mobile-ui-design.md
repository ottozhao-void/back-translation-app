# ç§»åŠ¨ç«¯ç‹¬ç«‹ UI è®¾è®¡ - è¯¦å°½å®ç°è®¡åˆ’

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†ä¸º Aether Translate åº”ç”¨åˆ›å»ºç‹¬ç«‹ç§»åŠ¨ç«¯ UI çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚é‡‡ç”¨**ç‹¬ç«‹è§†å›¾**è€Œéå“åº”å¼é€‚é…ï¼Œä¸ºç§»åŠ¨ç«¯ç”¨æˆ·æä¾›ä¸“é—¨ä¼˜åŒ–çš„äº¤äº’ä½“éªŒã€‚

**æ ¸å¿ƒè®¾è®¡ç†å¿µ**ï¼š
1. **ç‹¬ç«‹ä»£ç è·¯å¾„** - ç§»åŠ¨ç«¯ç»„ä»¶å®Œå…¨ç‹¬ç«‹äºæ¡Œé¢ç«¯ï¼Œä½äºä¸“ç”¨ç›®å½•
2. **å‰åç«¯åˆ†ç¦»** - åç«¯æä¾›å¢é‡ APIï¼Œå‰ç«¯è´Ÿè´£è®¾å¤‡æ£€æµ‹å’Œè§†å›¾åˆ‡æ¢
3. **è§¦æ§ä¼˜å…ˆ** - åº•éƒ¨ Tab å¯¼èˆª + æ»‘åŠ¨æ‰‹åŠ¿ + åº•éƒ¨å·¥å…·æ 
4. **æ ¸å¿ƒåŠŸèƒ½èšç„¦** - ä»…å®ç°åˆ—è¡¨ã€è¯¦æƒ…ã€ç»ƒä¹ ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½

---

## Part 1: éœ€æ±‚ç¡®è®¤

### ç”¨æˆ·é€‰æ‹©æ±‡æ€»

| æ–¹é¢ | é€‰æ‹© |
|------|------|
| åç«¯ API | æ–°å¢å¢é‡ APIï¼ˆPATCH å•æ¡æ›´æ–°ï¼‰ |
| åŠŸèƒ½èŒƒå›´ | æ ¸å¿ƒåŠŸèƒ½ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€ç»ƒä¹ ï¼‰ |
| å¯¼èˆªæ¨¡å¼ | åº•éƒ¨ Tab å¯¼èˆª |
| è·¯ç”±åˆ‡æ¢ | è‡ªåŠ¨æ£€æµ‹ï¼ˆæ ¹æ®å±å¹•å®½åº¦ï¼‰ |
| ç»ƒä¹ å¸ƒå±€ | æ»‘åŠ¨åˆ‡æ¢ï¼ˆç±»ä¼¼ Tinderï¼‰ |
| ä»£ç ç»„ç»‡ | ç‹¬ç«‹ç›®å½•ï¼ˆviews/mobile/ã€components/mobile/ï¼‰ |
| äº¤äº’æ–¹å¼ | åº•éƒ¨å·¥å…·æ  + æ‰‹åŠ¿æ“ä½œ |

---

## Part 2: æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Frontend Layer                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Device Detection Layer                        â”‚    â”‚
â”‚  â”‚  hooks/useDeviceType.ts                                          â”‚    â”‚
â”‚  â”‚  - isMobile: window.innerWidth < 768                             â”‚    â”‚
â”‚  â”‚  - Listens to resize events                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚              â–¼                             â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Desktop Views     â”‚      â”‚   Mobile Views      â”‚                   â”‚
â”‚  â”‚   (views/)          â”‚      â”‚   (views/mobile/)   â”‚                   â”‚
â”‚  â”‚                     â”‚      â”‚                     â”‚                   â”‚
â”‚  â”‚  - SentenceMode     â”‚      â”‚  - MobileApp        â”‚                   â”‚
â”‚  â”‚  - PracticeSession  â”‚      â”‚  - MobileHome       â”‚                   â”‚
â”‚  â”‚  - ModeSelector     â”‚      â”‚  - MobilePractice   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  - MobileSettings   â”‚                   â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                         â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Shared Services Layer                         â”‚    â”‚
â”‚  â”‚  - services/llmService.ts (LLM è°ƒç”¨)                             â”‚    â”‚
â”‚  â”‚  - utils/sentenceLoader.ts (å¥å­ CRUD) â† æ‰©å±•å¢é‡æ›´æ–°            â”‚    â”‚
â”‚  â”‚  - services/geminiService.ts (TTS)                               â”‚    â”‚
â”‚  â”‚  - types.ts (å…±äº«ç±»å‹å®šä¹‰)                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           Backend Layer                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      API Endpoints                                â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Existing:                                                        â”‚   â”‚
â”‚  â”‚  - GET  /api/sentences         â†’ è·å–æ‰€æœ‰å¥å­                     â”‚   â”‚
â”‚  â”‚  - POST /api/sentences         â†’ å…¨é‡ä¿å­˜å¥å­                     â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  New (Mobile-Optimized):                                          â”‚   â”‚
â”‚  â”‚  - GET  /api/sentences/:id     â†’ è·å–å•æ¡å¥å­è¯¦æƒ…                 â”‚   â”‚
â”‚  â”‚  - PATCH /api/sentences/:id    â†’ å¢é‡æ›´æ–°å•æ¡å¥å­                 â”‚   â”‚
â”‚  â”‚  - GET  /api/sentences/summary â†’ è·å–åˆ—è¡¨æ‘˜è¦ï¼ˆä¸å«ç¿»è¯‘å†å²ï¼‰     â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Data Storage                                 â”‚   â”‚
â”‚  â”‚  public/data/sentences.json                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ SentenceMode.tsx           # æ¡Œé¢ç«¯ä¸»è§†å›¾ï¼ˆç°æœ‰ï¼‰
â”‚   â”œâ”€â”€ PracticeSession.tsx        # æ¡Œé¢ç«¯ç»ƒä¹ è§†å›¾ï¼ˆç°æœ‰ï¼‰
â”‚   â””â”€â”€ mobile/                    # ç§»åŠ¨ç«¯è§†å›¾ï¼ˆæ–°å¢ï¼‰
â”‚       â”œâ”€â”€ MobileApp.tsx          # ç§»åŠ¨ç«¯åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ MobileHome.tsx         # é¦–é¡µï¼šå¥å­åˆ—è¡¨
â”‚       â”œâ”€â”€ MobilePractice.tsx     # ç»ƒä¹ é¡µï¼šæ»‘åŠ¨å¡ç‰‡
â”‚       â””â”€â”€ MobileSettings.tsx     # è®¾ç½®é¡µï¼šç²¾ç®€ç‰ˆ
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ sentence-mode/             # æ¡Œé¢ç«¯ç»„ä»¶ï¼ˆç°æœ‰ï¼‰
â”‚   â””â”€â”€ mobile/                    # ç§»åŠ¨ç«¯ç»„ä»¶ï¼ˆæ–°å¢ï¼‰
â”‚       â”œâ”€â”€ BottomTabBar.tsx       # åº•éƒ¨å¯¼èˆªæ 
â”‚       â”œâ”€â”€ SwipeCard.tsx          # æ»‘åŠ¨å¡ç‰‡
â”‚       â”œâ”€â”€ PracticeToolbar.tsx    # ç»ƒä¹ åº•éƒ¨å·¥å…·æ 
â”‚       â”œâ”€â”€ SentenceListItem.tsx   # å¥å­åˆ—è¡¨é¡¹
â”‚       â””â”€â”€ MobileHeader.tsx       # ç§»åŠ¨ç«¯é¡¶æ 
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ usePracticeTimer.ts        # è®¡æ—¶å™¨ï¼ˆç°æœ‰ï¼Œå…±äº«ï¼‰
â”‚   â””â”€â”€ useDeviceType.ts           # è®¾å¤‡æ£€æµ‹ï¼ˆæ–°å¢ï¼‰
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ sentenceLoader.ts          # å¥å­åŠ è½½å™¨ï¼ˆæ‰©å±•ï¼‰
â”‚
â””â”€â”€ server/
    â””â”€â”€ sentences/                 # å¥å­ APIï¼ˆæ‰©å±•ï¼‰
        â””â”€â”€ index.ts               # æ–°å¢å¢é‡æ›´æ–°ç«¯ç‚¹
```

---

## Part 3: åç«¯å®ç°

### 3.1 æ–°å¢ API ç«¯ç‚¹

#### 3.1.1 GET /api/sentences/summary

è·å–å¥å­åˆ—è¡¨æ‘˜è¦ï¼Œä¸åŒ…å«å®Œæ•´ç¿»è¯‘å†å²ï¼Œé€‚åˆç§»åŠ¨ç«¯å¿«é€ŸåŠ è½½ã€‚

```typescript
// Request
GET /api/sentences/summary

// Response
{
  "success": true,
  "data": [
    {
      "id": "article_123_p0_s0",
      "en": "The essence of learning...",  // æˆªæ–­è‡³ 50 å­—ç¬¦
      "zh": "å­¦ä¹ çš„æœ¬è´¨...",
      "sourceType": "article_123",
      "hasUserTranslation": true,          // ç®€åŒ–æ ‡è®°
      "lastPracticed": 1766877298717
    }
  ],
  "total": 42
}
```

#### 3.1.2 GET /api/sentences/:id

è·å–å•æ¡å¥å­å®Œæ•´è¯¦æƒ…ã€‚

```typescript
// Request
GET /api/sentences/article_123_p0_s0

// Response
{
  "success": true,
  "data": {
    "id": "article_123_p0_s0",
    "en": "The essence of learning is tranquility.",
    "zh": "å­¦ä¹ çš„æœ¬è´¨æ˜¯å®é™ã€‚",
    "sourceType": "article_123",
    "paragraphId": "p0",
    "order": 0,
    "createdAt": 1766636093980,
    "lastPracticed": 1766877298717,
    "userTranslationZh": {
      "text": "å­¦ä¹ çš„ç²¾é«“åœ¨äºå¹³é™ã€‚",
      "type": "diff",
      "timestamp": 1766877298717
    },
    "userTranslationEn": null,
    "practiceStats": {
      "totalAttempts": 5,
      "successRate": 0.8
    }
  }
}
```

#### 3.1.3 PATCH /api/sentences/:id

å¢é‡æ›´æ–°å•æ¡å¥å­ã€‚

```typescript
// Request
PATCH /api/sentences/article_123_p0_s0
Content-Type: application/json

{
  "userTranslationZh": {
    "text": "å­¦ä¹ çš„ç²¾é«“åœ¨äºå¹³é™ã€‚",
    "type": "diff",
    "timestamp": 1766877298717
  },
  "lastPracticed": 1766877298717
}

// Response
{
  "success": true,
  "data": {
    "id": "article_123_p0_s0",
    // ... æ›´æ–°åçš„å®Œæ•´å¥å­æ•°æ®
  }
}

// Error Response
{
  "success": false,
  "error": "Sentence not found"
}
```

### 3.2 åç«¯å®ç°æ–‡ä»¶

#### æ–‡ä»¶: `server.js` (æ‰©å±•)

```javascript
// === æ–°å¢ç§»åŠ¨ç«¯ä¼˜åŒ– API ===

// GET /api/sentences/summary - å¥å­åˆ—è¡¨æ‘˜è¦
app.get('/api/sentences/summary', (req, res) => {
  const dataPath = path.join(__dirname, 'public/data/sentences.json');

  if (!fs.existsSync(dataPath)) {
    return res.json({ success: true, data: [], total: 0 });
  }

  const store = JSON.parse(fs.readFileSync(dataPath, 'utf-8'));
  const summary = store.sentences.map(s => ({
    id: s.id,
    en: s.en.substring(0, 50) + (s.en.length > 50 ? '...' : ''),
    zh: s.zh.substring(0, 50) + (s.zh.length > 50 ? '...' : ''),
    sourceType: s.sourceType,
    hasUserTranslation: !!(s.userTranslationZh || s.userTranslationEn),
    lastPracticed: s.lastPracticed
  }));

  res.json({ success: true, data: summary, total: summary.length });
});

// GET /api/sentences/:id - å•æ¡å¥å­è¯¦æƒ…
app.get('/api/sentences/:id', (req, res) => {
  const { id } = req.params;
  const dataPath = path.join(__dirname, 'public/data/sentences.json');

  if (!fs.existsSync(dataPath)) {
    return res.status(404).json({ success: false, error: 'Sentence not found' });
  }

  const store = JSON.parse(fs.readFileSync(dataPath, 'utf-8'));
  const sentence = store.sentences.find(s => s.id === id);

  if (!sentence) {
    return res.status(404).json({ success: false, error: 'Sentence not found' });
  }

  res.json({ success: true, data: sentence });
});

// PATCH /api/sentences/:id - å¢é‡æ›´æ–°
app.patch('/api/sentences/:id', (req, res) => {
  const { id } = req.params;
  const updates = req.body;
  const dataPath = path.join(__dirname, 'public/data/sentences.json');

  if (!fs.existsSync(dataPath)) {
    return res.status(404).json({ success: false, error: 'Sentence not found' });
  }

  const store = JSON.parse(fs.readFileSync(dataPath, 'utf-8'));
  const index = store.sentences.findIndex(s => s.id === id);

  if (index === -1) {
    return res.status(404).json({ success: false, error: 'Sentence not found' });
  }

  // åˆå¹¶æ›´æ–°
  store.sentences[index] = { ...store.sentences[index], ...updates };
  store.lastModified = Date.now();

  // ä¿å­˜åˆ°æ–‡ä»¶
  fs.writeFileSync(dataPath, JSON.stringify(store, null, 2));

  // åŒæ­¥åˆ° dist ç›®å½•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  const distPath = path.join(__dirname, 'dist/data/sentences.json');
  if (fs.existsSync(path.dirname(distPath))) {
    fs.writeFileSync(distPath, JSON.stringify(store, null, 2));
  }

  res.json({ success: true, data: store.sentences[index] });
});
```

#### æ–‡ä»¶: `vite.config.ts` (æ‰©å±•)

éœ€è¦åœ¨å¼€å‘æœåŠ¡å™¨ä¸­é•œåƒæ·»åŠ ç›¸åŒçš„ API ç«¯ç‚¹ã€‚

### 3.3 åç«¯ä»»åŠ¡æ¸…å•

| ä»»åŠ¡ ID | ä»»åŠ¡ | æ–‡ä»¶ | ä¼˜å…ˆçº§ |
|---------|------|------|--------|
| B-1.1 | æ·»åŠ  GET /api/sentences/summary ç«¯ç‚¹ | server.js | é«˜ |
| B-1.2 | æ·»åŠ  GET /api/sentences/:id ç«¯ç‚¹ | server.js | é«˜ |
| B-1.3 | æ·»åŠ  PATCH /api/sentences/:id ç«¯ç‚¹ | server.js | é«˜ |
| B-2.1 | åœ¨ vite.config.ts ä¸­é•œåƒ summary ç«¯ç‚¹ | vite.config.ts | é«˜ |
| B-2.2 | åœ¨ vite.config.ts ä¸­é•œåƒ :id GET ç«¯ç‚¹ | vite.config.ts | é«˜ |
| B-2.3 | åœ¨ vite.config.ts ä¸­é•œåƒ :id PATCH ç«¯ç‚¹ | vite.config.ts | é«˜ |
| B-3.1 | æ›´æ–° sentenceLoader.ts æ·»åŠ å¢é‡æ›´æ–°å‡½æ•° | utils/sentenceLoader.ts | é«˜ |

---

## Part 4: å‰ç«¯å®ç°

### 4.1 è®¾å¤‡æ£€æµ‹å±‚

#### æ–‡ä»¶: `hooks/useDeviceType.ts`

```typescript
import { useState, useEffect } from 'react';

const MOBILE_BREAKPOINT = 768;

export interface DeviceType {
  isMobile: boolean;
  isTablet: boolean;
  isDesktop: boolean;
  width: number;
}

export function useDeviceType(): DeviceType {
  const [deviceType, setDeviceType] = useState<DeviceType>(() => {
    const width = typeof window !== 'undefined' ? window.innerWidth : 1024;
    return {
      isMobile: width < MOBILE_BREAKPOINT,
      isTablet: width >= MOBILE_BREAKPOINT && width < 1024,
      isDesktop: width >= 1024,
      width
    };
  });

  useEffect(() => {
    const handleResize = () => {
      const width = window.innerWidth;
      setDeviceType({
        isMobile: width < MOBILE_BREAKPOINT,
        isTablet: width >= MOBILE_BREAKPOINT && width < 1024,
        isDesktop: width >= 1024,
        width
      });
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return deviceType;
}
```

### 4.2 åº”ç”¨å…¥å£å±‚

#### æ–‡ä»¶: `index.tsx` (ä¿®æ”¹)

```typescript
import { useDeviceType } from './hooks/useDeviceType';
import { MobileApp } from './views/mobile/MobileApp';

function App() {
  const { isMobile } = useDeviceType();

  // ç§»åŠ¨ç«¯æ¸²æŸ“ç‹¬ç«‹è§†å›¾
  if (isMobile) {
    return <MobileApp />;
  }

  // æ¡Œé¢ç«¯ä¿æŒç°æœ‰é€»è¾‘
  return (
    // ... ç°æœ‰æ¡Œé¢ç«¯ä»£ç 
  );
}
```

### 4.3 ç§»åŠ¨ç«¯è§†å›¾è®¾è®¡

#### 4.3.1 MobileApp.tsx - åº”ç”¨å…¥å£

```typescript
interface MobileAppState {
  activeTab: 'home' | 'practice' | 'settings';
  selectedSentenceId: string | null;
  practiceMode: 'EN_TO_ZH' | 'ZH_TO_EN';
}
```

**å¸ƒå±€ç»“æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Mobile Header             â”‚  â† å›ºå®šé¡¶éƒ¨ï¼Œæ˜¾ç¤ºæ ‡é¢˜/è¿”å›æŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚                                     â”‚
â”‚          Content Area               â”‚  â† æ ¹æ® activeTab æ¸²æŸ“ä¸åŒè§†å›¾
â”‚         (flex-grow)                 â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ  é¦–é¡µ  â”‚  ğŸ“ ç»ƒä¹   â”‚  âš™ï¸ è®¾ç½®   â”‚  â† åº•éƒ¨ Tab å¯¼èˆª
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.2 MobileHome.tsx - é¦–é¡µ

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºå¥å­åˆ—è¡¨ï¼ˆä½¿ç”¨ summary API å¿«é€ŸåŠ è½½ï¼‰
- æŒ‰æ¥æºåˆ†ç»„æ˜¾ç¤º
- ç‚¹å‡»è¿›å…¥ç»ƒä¹ æ¨¡å¼

**å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Aether Translate        [+] [ç­›é€‰] â”‚  â† æ ‡é¢˜ + å¿«æ·æ“ä½œ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“„ The Art of Translation     â”‚  â”‚  â† æ¥æºåˆ†ç»„å¡ç‰‡
â”‚  â”‚    12 å¥å­ Â· 8 å·²ç»ƒä¹          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. The essence of learning... â”‚  â”‚  â† å¥å­åˆ—è¡¨é¡¹
â”‚  â”‚    å­¦ä¹ çš„æœ¬è´¨...        â— â–¸   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. Practice makes perfect...  â”‚  â”‚
â”‚  â”‚    ç†Ÿèƒ½ç”Ÿå·§...          â—‹ â–¸   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  ... (å¯æ»šåŠ¨)                       â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.3 MobilePractice.tsx - ç»ƒä¹ é¡µ

**åŠŸèƒ½**ï¼š
- æ»‘åŠ¨å¡ç‰‡åˆ‡æ¢å¥å­ï¼ˆå·¦æ»‘ä¸‹ä¸€å¥ï¼Œå³æ»‘ä¸Šä¸€å¥ï¼‰
- ç¿»è½¬å¡ç‰‡æŸ¥çœ‹ç­”æ¡ˆ
- åº•éƒ¨å·¥å…·æ æ“ä½œ

**å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›          EN â†’ ä¸­     1/12   â”‚  â† é¡¶æ ï¼šè¿”å› + æ¨¡å¼ + è¿›åº¦
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚    The essence of learning    â”‚  â”‚  â† æ»‘åŠ¨å¡ç‰‡ï¼ˆåŸæ–‡/è¯‘æ–‡ï¼‰
â”‚  â”‚    is tranquility.            â”‚  â”‚     - ç‚¹å‡»ç¿»è½¬æŸ¥çœ‹ç­”æ¡ˆ
â”‚  â”‚                               â”‚  â”‚     - å·¦å³æ»‘åŠ¨åˆ‡æ¢å¥å­
â”‚  â”‚                     ğŸ”Š        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  [ç”¨æˆ·ç¿»è¯‘è¾“å…¥åŒº...]          â”‚  â”‚  â† ç¿»è¯‘è¾“å…¥æ¡†
â”‚  â”‚                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æç¤º]   [æäº¤]   [è·³è¿‡]   [ğŸ”„]   â”‚  â† åº•éƒ¨å·¥å…·æ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ»‘åŠ¨æ‰‹åŠ¿è®¾è®¡**ï¼š

```typescript
// æ‰‹åŠ¿é…ç½®
const swipeConfig = {
  threshold: 50,           // è§¦å‘æ»‘åŠ¨çš„æœ€å°è·ç¦»
  velocityThreshold: 0.3,  // è§¦å‘æ»‘åŠ¨çš„æœ€å°é€Ÿåº¦
  rubberBandEffect: true,  // è¾¹ç•Œå›å¼¹æ•ˆæœ
};

// æ‰‹åŠ¿æ–¹å‘
type SwipeDirection = 'left' | 'right' | 'up' | 'down';

// æ‰‹åŠ¿åŠ¨ä½œæ˜ å°„
const gestureActions = {
  left: 'nextSentence',    // å·¦æ»‘ï¼šä¸‹ä¸€å¥
  right: 'prevSentence',   // å³æ»‘ï¼šä¸Šä¸€å¥
  up: 'showAnswer',        // ä¸Šæ»‘ï¼šæ˜¾ç¤ºç­”æ¡ˆï¼ˆå¤‡é€‰ï¼‰
  tap: 'flipCard',         // ç‚¹å‡»ï¼šç¿»è½¬å¡ç‰‡
};
```

#### 4.3.4 MobileSettings.tsx - è®¾ç½®é¡µ

**åŠŸèƒ½**ï¼š
- ç²¾ç®€ç‰ˆè®¾ç½®ï¼ŒåªåŒ…å«æ ¸å¿ƒé€‰é¡¹
- ç»ƒä¹ æ¨¡å¼åˆ‡æ¢
- è‡ªåŠ¨ä¿å­˜å¼€å…³
- ä¸»é¢˜åˆ‡æ¢

**å¸ƒå±€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®¾ç½®                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ç»ƒä¹ è®¾ç½®                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ é»˜è®¤æ¨¡å¼      [ENâ†’ä¸­ â–¼]       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ è‡ªåŠ¨ä¿å­˜      [====â—‹]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  å¤–è§‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¸»é¢˜          [è·Ÿéšç³»ç»Ÿ â–¼]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  å…³äº                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç‰ˆæœ¬          1.0.0           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ åˆ‡æ¢åˆ°æ¡Œé¢ç‰ˆ                 â–¸â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 ç§»åŠ¨ç«¯ç»„ä»¶è®¾è®¡

#### 4.4.1 BottomTabBar.tsx

```typescript
interface BottomTabBarProps {
  activeTab: 'home' | 'practice' | 'settings';
  onTabChange: (tab: 'home' | 'practice' | 'settings') => void;
  practiceBadge?: number;  // æœªå®Œæˆå¥å­æ•°é‡
}
```

**æ ·å¼è§„èŒƒ**ï¼š
- é«˜åº¦: 56px + safe-area-inset-bottom
- èƒŒæ™¯: glass-panel æ•ˆæœ
- å›¾æ ‡: 24x24, é€‰ä¸­çŠ¶æ€é«˜äº®
- æ ‡ç­¾: 12px, é€‰ä¸­çŠ¶æ€æ˜¾ç¤º

#### 4.4.2 SwipeCard.tsx

```typescript
interface SwipeCardProps {
  sentence: SentencePair;
  mode: 'EN_TO_ZH' | 'ZH_TO_EN';
  isFlipped: boolean;
  onFlip: () => void;
  onSwipe: (direction: 'left' | 'right') => void;
  onSpeak: () => void;
}
```

**åŠ¨ç”»æ•ˆæœ**ï¼š
- ç¿»è½¬: 3D rotateY åŠ¨ç”» (400ms)
- æ»‘åŠ¨: translateX + opacity è¿‡æ¸¡
- å›å¼¹: spring åŠ¨ç”»

#### 4.4.3 PracticeToolbar.tsx

```typescript
interface PracticeToolbarProps {
  onHint: () => void;
  onSubmit: () => void;
  onSkip: () => void;
  onReset: () => void;
  isSubmitDisabled: boolean;
  showHint: boolean;
}
```

**æŒ‰é’®å¸ƒå±€**ï¼š
- 4 ä¸ªç­‰å®½æŒ‰é’®
- ä¸»æ“ä½œï¼ˆæäº¤ï¼‰ä½¿ç”¨å¼ºè°ƒè‰²
- å›¾æ ‡ + æ–‡å­—æ ‡ç­¾

### 4.5 å‰ç«¯ä»»åŠ¡æ¸…å•

| é˜¶æ®µ | ä»»åŠ¡ ID | ä»»åŠ¡ | æ–‡ä»¶ | ä¼˜å…ˆçº§ |
|------|---------|------|------|--------|
| **åŸºç¡€è®¾æ–½** | F-1.1 | åˆ›å»º useDeviceType hook | hooks/useDeviceType.ts | é«˜ |
| | F-1.2 | ä¿®æ”¹ index.tsx æ·»åŠ è®¾å¤‡æ£€æµ‹åˆ†æµ | index.tsx | é«˜ |
| | F-1.3 | åˆ›å»º mobile ç›®å½•ç»“æ„ | views/mobile/, components/mobile/ | é«˜ |
| **æ ¸å¿ƒè§†å›¾** | F-2.1 | å®ç° MobileApp å…¥å£ç»„ä»¶ | views/mobile/MobileApp.tsx | é«˜ |
| | F-2.2 | å®ç° BottomTabBar ç»„ä»¶ | components/mobile/BottomTabBar.tsx | é«˜ |
| | F-2.3 | å®ç° MobileHeader ç»„ä»¶ | components/mobile/MobileHeader.tsx | é«˜ |
| **é¦–é¡µ** | F-3.1 | å®ç° MobileHome è§†å›¾ | views/mobile/MobileHome.tsx | é«˜ |
| | F-3.2 | å®ç° SentenceListItem ç»„ä»¶ | components/mobile/SentenceListItem.tsx | é«˜ |
| | F-3.3 | é›†æˆ summary API è°ƒç”¨ | views/mobile/MobileHome.tsx | é«˜ |
| **ç»ƒä¹ é¡µ** | F-4.1 | å®ç° MobilePractice è§†å›¾ | views/mobile/MobilePractice.tsx | é«˜ |
| | F-4.2 | å®ç° SwipeCard ç»„ä»¶ï¼ˆæ»‘åŠ¨+ç¿»è½¬ï¼‰ | components/mobile/SwipeCard.tsx | é«˜ |
| | F-4.3 | å®ç° PracticeToolbar ç»„ä»¶ | components/mobile/PracticeToolbar.tsx | é«˜ |
| | F-4.4 | é›†æˆæ‰‹åŠ¿åº“ (react-use-gesture æˆ–è‡ªå®ç°) | components/mobile/SwipeCard.tsx | ä¸­ |
| | F-4.5 | å®ç°ç¿»è¯‘è¾“å…¥ç»„ä»¶ | components/mobile/TranslationInput.tsx | é«˜ |
| **è®¾ç½®é¡µ** | F-5.1 | å®ç° MobileSettings è§†å›¾ | views/mobile/MobileSettings.tsx | ä¸­ |
| **é›†æˆ** | F-6.1 | æ‰©å±• sentenceLoader æ”¯æŒå¢é‡ API | utils/sentenceLoader.ts | é«˜ |
| | F-6.2 | æ·»åŠ ç§»åŠ¨ç«¯ä¸“ç”¨æ ·å¼ | styles/mobile.css æˆ– Tailwind | ä¸­ |
| | F-6.3 | æµ‹è¯•è®¾å¤‡æ£€æµ‹åˆ‡æ¢ | - | é«˜ |

---

## Part 5: å®ç°é˜¶æ®µåˆ’åˆ†

### Phase 1: åç«¯ API æ‰©å±• (Backend)

**ç›®æ ‡**: å®ç°ç§»åŠ¨ç«¯ä¼˜åŒ–çš„å¢é‡ API

**ä»»åŠ¡**:
- [ ] B-1.1: æ·»åŠ  GET /api/sentences/summary
- [ ] B-1.2: æ·»åŠ  GET /api/sentences/:id
- [ ] B-1.3: æ·»åŠ  PATCH /api/sentences/:id
- [ ] B-2.1~2.3: åœ¨ vite.config.ts ä¸­é•œåƒæ‰€æœ‰ç«¯ç‚¹
- [ ] B-3.1: æ›´æ–° sentenceLoader.ts

**éªŒæ”¶æ ‡å‡†**:
- å¯é€šè¿‡ curl æµ‹è¯•æ‰€æœ‰æ–° API
- TypeScript ç¼–è¯‘é€šè¿‡
- ç°æœ‰åŠŸèƒ½ä¸å—å½±å“

**é¢„è®¡æ–‡ä»¶å˜æ›´**:
```
Modified:
  server.js           (+60 lines)
  vite.config.ts      (+70 lines)
  utils/sentenceLoader.ts (+40 lines)
```

---

### Phase 2: å‰ç«¯åŸºç¡€è®¾æ–½ (Frontend Infrastructure)

**ç›®æ ‡**: å»ºç«‹ç§»åŠ¨ç«¯æ¡†æ¶å’Œè®¾å¤‡æ£€æµ‹

**ä»»åŠ¡**:
- [ ] F-1.1: åˆ›å»º useDeviceType hook
- [ ] F-1.2: ä¿®æ”¹ index.tsx æ·»åŠ è®¾å¤‡æ£€æµ‹
- [ ] F-1.3: åˆ›å»ºç›®å½•ç»“æ„
- [ ] F-2.1: å®ç° MobileApp å…¥å£
- [ ] F-2.2: å®ç° BottomTabBar
- [ ] F-2.3: å®ç° MobileHeader

**éªŒæ”¶æ ‡å‡†**:
- çª—å£å®½åº¦ < 768px æ—¶æ¸²æŸ“ç§»åŠ¨ç«¯ UI
- åº•éƒ¨ Tab å¯¼èˆªå¯ç‚¹å‡»åˆ‡æ¢
- ç©ºç™½é¡µé¢æ¡†æ¶æ˜¾ç¤ºæ­£ç¡®

**é¢„è®¡æ–‡ä»¶å˜æ›´**:
```
Created:
  hooks/useDeviceType.ts              (40 lines)
  views/mobile/MobileApp.tsx          (80 lines)
  components/mobile/BottomTabBar.tsx  (70 lines)
  components/mobile/MobileHeader.tsx  (50 lines)

Modified:
  index.tsx                           (+15 lines)
```

---

### Phase 3: é¦–é¡µå®ç° (Home View)

**ç›®æ ‡**: å®ç°å¥å­åˆ—è¡¨æµè§ˆåŠŸèƒ½

**ä»»åŠ¡**:
- [ ] F-3.1: å®ç° MobileHome è§†å›¾
- [ ] F-3.2: å®ç° SentenceListItem ç»„ä»¶
- [ ] F-3.3: é›†æˆ summary API

**éªŒæ”¶æ ‡å‡†**:
- å¯åŠ è½½å¹¶æ˜¾ç¤ºå¥å­åˆ—è¡¨
- æŒ‰æ¥æºåˆ†ç»„æ˜¾ç¤º
- ç‚¹å‡»å¥å­å¯é€‰ä¸­

**é¢„è®¡æ–‡ä»¶å˜æ›´**:
```
Created:
  views/mobile/MobileHome.tsx              (150 lines)
  components/mobile/SentenceListItem.tsx   (80 lines)
```

---

### Phase 4: ç»ƒä¹ é¡µå®ç° (Practice View)

**ç›®æ ‡**: å®ç°æ ¸å¿ƒç¿»è¯‘ç»ƒä¹ åŠŸèƒ½

**ä»»åŠ¡**:
- [ ] F-4.1: å®ç° MobilePractice è§†å›¾
- [ ] F-4.2: å®ç° SwipeCard ç»„ä»¶
- [ ] F-4.3: å®ç° PracticeToolbar ç»„ä»¶
- [ ] F-4.4: é›†æˆæ‰‹åŠ¿æ“ä½œ
- [ ] F-4.5: å®ç°ç¿»è¯‘è¾“å…¥ç»„ä»¶

**éªŒæ”¶æ ‡å‡†**:
- å¯æ»‘åŠ¨åˆ‡æ¢å¥å­
- å¯ç‚¹å‡»ç¿»è½¬æŸ¥çœ‹ç­”æ¡ˆ
- å¯è¾“å…¥ç¿»è¯‘å¹¶æäº¤
- ä½¿ç”¨ PATCH API ä¿å­˜è¿›åº¦

**é¢„è®¡æ–‡ä»¶å˜æ›´**:
```
Created:
  views/mobile/MobilePractice.tsx          (200 lines)
  components/mobile/SwipeCard.tsx          (180 lines)
  components/mobile/PracticeToolbar.tsx    (80 lines)
  components/mobile/TranslationInput.tsx   (100 lines)
```

---

### Phase 5: è®¾ç½®ä¸ä¼˜åŒ– (Settings & Polish)

**ç›®æ ‡**: å®Œæˆè®¾ç½®é¡µå¹¶ä¼˜åŒ–ä½“éªŒ

**ä»»åŠ¡**:
- [ ] F-5.1: å®ç° MobileSettings è§†å›¾
- [ ] F-6.2: æ·»åŠ ç§»åŠ¨ç«¯ä¸“ç”¨æ ·å¼
- [ ] F-6.3: å…¨é¢æµ‹è¯•

**éªŒæ”¶æ ‡å‡†**:
- è®¾ç½®é¡µå¯æ­£å¸¸ä½¿ç”¨
- åŠ¨ç”»æµç•…
- æ— æ˜æ˜¾ UI é—®é¢˜

**é¢„è®¡æ–‡ä»¶å˜æ›´**:
```
Created:
  views/mobile/MobileSettings.tsx    (120 lines)
  styles/mobile.css (æˆ– Tailwind)    (100 lines)
```

---

## Part 6: æŠ€æœ¯å†³ç­–

| å†³ç­– | é€‰æ‹© | åŸå›  |
|------|------|------|
| æ‰‹åŠ¿åº“ | è‡ªå®ç° + TouchEvent API | é¿å…å¼•å…¥é¢å¤–ä¾èµ–ï¼Œéœ€æ±‚ç®€å• |
| åŠ¨ç”»åº“ | CSS transitions + Tailwind | ä¿æŒä¸€è‡´æ€§ï¼Œæ€§èƒ½å¥½ |
| çŠ¶æ€ç®¡ç† | React useState | éµå¾ªç°æœ‰æ¨¡å¼ï¼Œç§»åŠ¨ç«¯çŠ¶æ€ç®€å• |
| è·¯ç”± | æ— è·¯ç”±åº“ï¼ŒTab çŠ¶æ€ç®¡ç† | SPA æ— éœ€ URL è·¯ç”±ï¼Œç®€åŒ–å®ç° |
| æ ·å¼æ–¹æ¡ˆ | Tailwind CSS | ä¸ç°æœ‰æ¡Œé¢ç«¯ä¿æŒä¸€è‡´ |

---

## Part 7: é£é™©ä¸æ³¨æ„äº‹é¡¹

1. **æ‰‹åŠ¿å†²çª**: æ»‘åŠ¨åˆ‡æ¢ä¸é¡µé¢æ»šåŠ¨å¯èƒ½å†²çªï¼Œéœ€è¦åˆç†å¤„ç†äº‹ä»¶å†’æ³¡
2. **é”®ç›˜å¼¹å‡º**: ç§»åŠ¨ç«¯è½¯é”®ç›˜ä¼šæ”¹å˜è§†å£é«˜åº¦ï¼Œéœ€è¦å¤„ç†å¸ƒå±€é€‚é…
3. **æ€§èƒ½ä¼˜åŒ–**: åˆ—è¡¨é•¿æ—¶éœ€è¦è€ƒè™‘è™šæ‹Ÿæ»šåŠ¨
4. **ç¦»çº¿æ”¯æŒ**: å½“å‰ä¸è€ƒè™‘ï¼Œä½†å¢é‡ API ä¸ºæœªæ¥ç¦»çº¿ä¼˜å…ˆè®¾è®¡ç•™æœ‰ä½™åœ°
5. **å®‰å…¨åŒºåŸŸ**: iOS éœ€è¦å¤„ç† safe-area-inset-bottom

---

## Part 8: æˆåŠŸæ ‡å‡†

1. **åŠŸèƒ½å®Œæ•´**: å¯å®Œæˆæµè§ˆã€ç»ƒä¹ ã€æäº¤çš„æ ¸å¿ƒæµç¨‹
2. **ä½“éªŒæµç•…**: æ»‘åŠ¨å’Œç¿»è½¬åŠ¨ç”»æµç•…æ— å¡é¡¿
3. **API é«˜æ•ˆ**: ä½¿ç”¨å¢é‡ APIï¼Œå‡å°‘æ•°æ®ä¼ è¾“
4. **ä»£ç éš”ç¦»**: ç§»åŠ¨ç«¯ä»£ç ä¸æ¡Œé¢ç«¯å®Œå…¨åˆ†ç¦»
5. **è‡ªåŠ¨åˆ‡æ¢**: æ ¹æ®å±å¹•å®½åº¦è‡ªåŠ¨é€‰æ‹©è§†å›¾

---

*æ–‡æ¡£åˆ›å»º: 2026-02-07*
*ç‰ˆæœ¬: 1.0*
